<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Food Website</title>
    <link rel="stylesheet" href="/assets/css/style.css">
    <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css"/>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">

  <!-- main css -->
  <link rel="stylesheet" href="/assets/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body >
    <style>
 

    .order_main h1{
        display: flex;
        align-items: center;
        justify-content: center;
        color: #000;
        font-size: 55px;
    }

    .order_main h1 span{
        color: #44813e;
        font-family: mv boli;
    }

    .order_main h1 span::after{
        content: '';
        width: 100%;
        height: 2px;
        background: #44813e;
        display: block;
        position: relative;
        bottom: 15px;
    }

    .order_main{
        display: flex;
        align-items: center;
        justify-content: space-around;
    }
    </style>
 <nav>
            <div class="logo">
                        
                <img src="/assets/img/logo.png">
            </div>

            <ul>
                <li><a href="/">Home</a></li>
                <li><a href="/recipes">Recipes</a></li>
                <li><a href="/category">Category</a></li>
                <li><a href="#Review">Review</a></li>
            </ul>
            {{if .username}}
            <div class="icon">
                
            
                <i class="far fa-user"></i>
                <a href="/profile" class="btn">{{ .username}}</a>
                <a href="/user/logout" class="btn">logout</a>
                
            </div>
              {{else}}
              <div class="icon">
                
                <i class="far fa-user"></i>
                <a href="/login" class="btn">login</a>
                
            </div>
              {{end}}

           

        </nav>
    <div class="container">
     



    <!--About-->
    
        
        {{range .recipeData}}
    <div class="about" id="About">
        <div class="about_main">

            <div class="image">
                <img src="/assets/img/Food-Plate.png">
            </div>
            
            <div class="about_text">
                <h1><span>{{ .Name}}</span></h1>
                <h3>{{ .Categories}}</h3>
                <p>{{ .Description}}
                </p>
                <p>Star {{ .Rate}} <i class="fa-solid fa-star"></i></p>
                <script>
                    var rid= "{{ .Id_r}}"
                    localStorage.setItem("r_id",rid)
                </script>

                <a href="/buy" class="about_btn">Buy Now</a>
            </div>
            
        </div>

        

    </div>
    {{ end }}

   



        <div class="order_main">

            
            <div class="comment-form">
                <form id="comment-form">
                  <label for="comment">Leave a comment:</label><div class="form-floating">
                    <textarea type="text" name="commentText" class="form-control" id="commentText" placeholder="commentText"></textarea>
                    
                  </div>
                  <input type="text" class="form-control" id="recipeId" name="recipeId" style="display: none;">
          
                
                  <label for="rating">Rate this page:</label>
                  <div class="rating">
                    <input type="radio" id="star5" name="rating" value="1" required/>
                    <label for="star5" title="5 stars"></label>
                    <input type="radio" id="star4" name="rating" value="2"/>
                    <label for="star4" title="4 stars"></label>
                    <input type="radio" id="star3" name="rating" value="3"/>
                    <label for="star3" title="3 stars"></label>
                    <input type="radio" id="star2" name="rating" value="4"/>
                    <label for="star2" title="2 stars"></label>
                    <input type="radio" id="star1" name="rating" value="5"/>
                    <label for="star1" title="1 star"></label>
                  </div>
              
                  <button id="submit" class="btn" type="submit">Send</button>
                </form>
              </div>
              <div>
                <style>
                    .comments {
                        list-style: none;
                        padding: 0;
                    }
                
                    .comments li {
                        margin-bottom: 10px;
                    }
                
                    .comments p {
                        margin: 0;
                        padding: 5px;
                        background-color: #f0f0f0;
                        border-radius: 5px;
                    }
                </style> 
                <div>
                    <h1>Comments</h1>
                    <ul class="comments">
                        {{range .commentsData}}
                        <li>
                            <p>{{ .Username }}: {{ .ComText }}</p>
                        </li>
                        {{end}}
                    </ul>
                </div>
               
                
              </div>
            
            

        </div>

    <!--Footer-->

    <footer>
        <div class="footer_main">

            <div class="footer_tag">
                <h2>Location</h2>
                <p>Sri Lanka</p>
                <p>USA</p>
                <p>India</p>
                <p>Japan</p>
                <p>Italy</p>
            </div>

            <div class="footer_tag">
                <h2>Quick Link</h2>
                <p>Home</p>
                <p>About</p>
                <p>Menu</p>
                <p>Gallary</p>
                <p>Order</p>
            </div>

            <div class="footer_tag">
                <h2>Contact</h2>
                <p>+94 12 3456 789</p>
                <p>+94 25 5568456</p>
                <p>johndeo123@gmail.com</p>
                <p>foodshop123@gmail.com</p>
            </div>

            <div class="footer_tag">
                <h2>Our Service</h2>
                <p>Fast Delivery</p>
                <p>Easy Payments</p>
                <p>24 x 7 Service</p>
            </div>

            <div class="footer_tag">
                <h2>Follows</h2>
                <i class="fa-brands fa-facebook-f"></i>
                <i class="fa-brands fa-twitter"></i>
                <i class="fa-brands fa-instagram"></i>
                <i class="fa-brands fa-linkedin-in"></i>
            </div>

        </div>

        <p class="end">Design by<span><i class="fa-solid fa-face-grin"></i> WT Master Code</span></p>

    </footer>
 </div>

 <script>
        var     recipeId = document.URL.split("/")[4]
        console.log(recipeId)

    const commentForm = document.getElementById("comment-form");
        commentForm.addEventListener("submit", async (event) => {
        event.preventDefault();

        const formData = new FormData(commentForm);
        const commentText = formData.get("commentText");
        const rating = formData.get("rating");
        

        const response = await fetch("/sendFeedback", {
            method: "POST",
            headers: {
            "Content-Type": "application/json"
            },
            body: JSON.stringify({
            "CommentText": commentText,
            "RecipeId":recipeId,
            "Rate": rating
            })
        });

        if (response.ok){
            location.reload();
        }
    });


    
</script>
    
</body>
</html>